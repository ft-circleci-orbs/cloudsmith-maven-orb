description: >
  Generate temporary Cloudsmith credentials using OIDC and construct a maven repository URL string for a specific Cloudsmith
  repository. On completion the command sets the CLOUDSMITH_MAVEN_REPOSITORY environment variable for
  use with maven. The repository url includes Cloudsmith authentication credentials generated using OIDC.
usage:
  version: 2.1
  orbs:
    cloudsmith-maven: ft-circleci-orbs/cloudsmith-maven@0.0.1
  jobs:
    build:
      docker:
        - image: cimg/openjdk:21.0.2
      steps:
        - checkout
        - cloudsmith-maven/set_env_vars_for_maven:
            repository: "your-repository-id"
        - run:
          name: Cloudsmith - Set environment variables
          command: cloudsmith-maven/set_env_vars_for_maven
  workflows:
    main:
      jobs:
        - build
